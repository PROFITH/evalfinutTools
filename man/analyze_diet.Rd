% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analyze_diet.R
\name{analyze_diet}
\alias{analyze_diet}
\title{Calculate Comprehensive Diet Quality and NOVA Statistics}
\usage{
analyze_diet(recall_data)
}
\arguments{
\item{recall_data}{A data frame containing the dietary recall data, typically generated
by \code{\link{import_recall_data}}. If supplied manually, it must contain the
following columns:
\itemize{
\item \code{food_id}: Unique identifier linking to the internal food database.
\item \code{serving_g}: Portion size in grams.
\item \code{day}: The day of the record (e.g., 1, 2, 3).
\item \code{meal}: Name of the meal (e.g., "Desayuno", "Cena").
\item \code{NOVA}: The NOVA group classification (1-4).
}}
}
\value{
A single-row data frame (tibble) containing flattened statistical summaries.
All column names are lower_snake_case.
}
\description{
Calculates total energy intake and examines the distribution of calories across
different meals and NOVA food processing classifications. The function aggregates
24-hour recall data, imputes missing values (e.g., skipped meals count as 0 kcal),
and returns a flattened, single-row summary suitable for regression analysis.
}
\details{
\strong{Methodology:}
This function calculates the \emph{mean of daily totals}. For every participant, it:
\enumerate{
\item Calculates the total energy (kcal) for every specific Day/Meal/NOVA combination.
\item Imputes \code{0} for any combination not present (e.g., if a participant skipped "Cena" on Day 2, it is recorded as 0 kcal rather than missing).
\item Averages these daily sums to produce a representative daily intake.
}

\strong{Output Structure:}
The output is a "wide" format data frame with one row per participant. Column names are
standardized to snake_case using \code{janitor::clean_names()}. The columns follow this pattern:
\itemize{
\item \code{total_daily_kcal}: Grand mean of daily energy intake.
\item \code{[meal]_kcal}: Absolute energy for a specific meal (e.g., \code{desayuno_kcal}).
\item \code{[meal]_perc}: Percent of total daily energy from that meal.
\item \code{nova[1-4]_kcal}: Absolute energy from a specific NOVA group.
\item \code{nova[1-4]_perc}: Percent of total daily energy from that NOVA group.
\item \code{[meal]_nova[1-4]_kcal}: Intersection of Meal and NOVA (e.g., \code{cena_nova4_kcal}).
}
}
\examples{
\dontrun{
  # Classic workflow
  raw_data <- import_recall_data("participant_001.xls")
  diet_stats <- analyze_diet(raw_data)
  
  # Access specific metrics
  print(diet_stats$total_daily_kcal)
  print(diet_stats$cena_nova4_perc) # \% of calories from UPF at dinner
}
}
