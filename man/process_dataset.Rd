% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/process_dataset.R
\name{process_dataset}
\alias{process_dataset}
\title{Batch Process a Directory of Dietary Recall Files}
\usage{
process_dataset(folder_path, output_csv = "diet.csv", format = "euro")
}
\arguments{
\item{folder_path}{String. The root directory containing the participant files.
The function searches recursively (i.e., it will find files inside subfolders).}

\item{output_csv}{String (Optional). The file path where the final results will be saved.
Defaults to \code{"diet.csv"}. Set to \code{NULL} to skip saving to disk.}

\item{format}{String. Choose "euro" for Spain/Europe (sep=';', dec=',') or "us" for standard (sep=',', dec='.'). Defaults to "euro".#'}
}
\value{
A master data frame (tibble) where each row represents one participant.
The columns include:
\itemize{
\item \code{source_file}: Name of the original file.
\item \code{code, name, sex, age...}: Participant metadata from the file header.
\item \code{total_daily_kcal}: Mean daily energy intake.
\item \code{[meal]_nova[1-4]_kcal}: Detailed diet composition columns.
}
The function returns this data frame invisibly.
}
\description{
Automates the entire data pipeline for a study. This function recursively searches a
folder for all compatible dietary recall files (.xls, .xlsx, .csv), processes them individually
to calculate NOVA and nutrient statistics, and merges them into a single master dataset.
It includes robust error handling and a real-time progress bar.
}
\details{
\strong{Workflow:}
\enumerate{
\item \strong{Discovery:} Scans \code{folder_path} for all files matching .xls, .xlsx, or .csv (case insensitive).
\item \strong{Processing:} Iterates through each file:
\itemize{
\item Parses metadata (Age, Sex, etc.) and recall data using \code{\link{import_recall_data}}.
\item Calculates diet quality and NOVA metrics using \code{\link{analyze_diet}}.
}
\item \strong{Merging:} Combines participant metadata (header info) with their calculated diet statistics into a single wide-format row.
\item \strong{Output:} Writes the final merged data frame to a CSV file using \code{data.table::fwrite} for speed.
}

\strong{Error Handling:}
If a specific file is corrupted or empty, the function will catch the error, print a warning
to the console, and continue processing the remaining files without crashing.
}
